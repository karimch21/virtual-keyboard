!function(){"use strict";const t={en:{shift:{one:[[192,"~"],[49,"!"],[50,"@"],[51,"#"],[52,"$"],[53,"%"],[54,"^"],[55,"&"],[56,"*"],[57,"("],[48,")"],[189,"_"],[187,"+"],[8,"Backspace"]],two:[[9,"Tab"],[81,"Q"],[87,"W"],[69,"E"],[82,"R"],[84,"T"],[89,"Y"],[85,"U"],[73,"I"],[70,"O"],[80,"P"],[219,"["],[221,"]"],[220,"|"],[46,"Del"]],three:[[20,"CapsLock"],[65,"A"],[83,"S"],[68,"D"],[70,"F"],[71,"G"],[72,"H"],[74,"J"],[75,"K"],[76,"L"],[186,":"],[222,'"'],[13,"Enter"]],four:[[16,"Shift"],[90,"Z"],[88,"X"],[67,"C"],[86,"V"],[66,"B"],[78,"N"],[77,"M"],[188,"<"],[190,">"],[191,"?"],[38,"Up"],[16,"Shift"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"Space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]},unshift:{one:[[192,"`"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[48,"0"],[189,"-"],[187,"="],[8,"Backspace"]],two:[[9,"Tab"],[81,"q"],[87,"w"],[69,"e"],[82,"r"],[84,"t"],[89,"y"],[85,"u"],[73,"i"],[79,"o"],[80,"p"],[219,"["],[221,"]"],[220,String("\\")],[46,"Del"]],three:[[20,"CapsLock"],[65,"a"],[83,"s"],[68,"d"],[70,"f"],[71,"g"],[72,"h"],[74,"j"],[75,"k"],[76,"l"],[186,":"],[222,'"'],[13,"Enter"]],four:[[16,"Shift"],[90,"z"],[88,"x"],[67,"c"],[86,"v"],[66,"b"],[78,"n"],[77,"m"],[188,","],[190,"."],[191,"/"],[38,"Up"],[16,"Shift"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"Space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]}},ru:{shift:{one:[[192,"Ё"],[49,"!"],[50,'"'],[51,"№"],[52,";"],[53,"%"],[54,":"],[55,"?"],[56,"*"],[57,"("],[48,")"],[189,"_"],[187,"+"],[8,"Backspace"]],two:[[9,"Tab"],[81,"Й"],[87,"Ц"],[69,"У"],[82,"К"],[84,"Е"],[89,"Н"],[85,"Г"],[73,"Ш"],[79,"Щ"],[80,"З"],[219,"Х"],[221,"Ъ"],[220,"/"],[46,"Del"]],three:[[20,"CapsLock"],[65,"Ф"],[83,"Ы"],[68,"В"],[70,"А"],[71,"П"],[72,"Р"],[74,"О"],[75,"Л"],[76,"Д"],[186,"Ж"],[222,"Э"],[13,"Enter"]],four:[[16,"Shift"],[90,"Я"],[88,"Ч"],[67,"С"],[86,"М"],[66,"И"],[78,"Т"],[77,"Ь"],[188,"Б"],[190,"Ю"],[191,","],[38,"Up"],[16,"Shift"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"Space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]},unshift:{one:[[192,"ё"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[48,"0"],[189,"-"],[187,"="],[8,"Backspace"]],two:[[9,"Tab"],[81,"й"],[87,"ц"],[69,"у"],[82,"к"],[84,"е"],[89,"н"],[85,"г"],[73,"ш"],[79,"щ"],[80,"з"],[219,"х"],[221,"ъ"],[220,"\\"],[46,"Del"]],three:[[20,"CapsLock"],[65,"ф"],[83,"ы"],[68,"в"],[70,"а"],[71,"п"],[72,"р"],[74,"о"],[75,"л"],[76,"д"],[186,"ж"],[222,"э"],[13,"Enter"]],four:[[16,"Shift"],[90,"я"],[88,"ч"],[67,"с"],[86,"м"],[66,"и"],[78,"т"],[77,"ь"],[188,"б"],[190,"ю"],[191,"."],[38,"Up"],[16,"Shift"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"Space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]}}},e={en:{65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"Win",186:[":",";"],222:['"',"'"],188:["<",","],190:[">","."],191:["?","/"],192:["~","`"],187:["+","="],189:["_","-"],219:["{","["],221:["}","]"],220:["|","\\"],48:[")","0"],49:["!","1"],50:["@","2"],51:["#","3"],52:["$","4"],53:["%","5"],54:["^","6"],55:["&","7"],56:["*","8"],57:["(","9"],8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"CapsLock",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del"},ru:{65:"ф",66:"и",67:"с",68:"в",69:"у",70:"а",71:"п",72:"р",73:"ш",74:"о",75:"л",76:"д",77:"ь",78:"т",79:"о",80:"з",81:"й",82:"г",83:"ы",84:"е",85:"г",86:"м",87:"ц",88:"ч",89:"н",90:"я",91:"Win",186:"ж",222:"э",188:"б",190:"ю",192:"ё",219:"х",221:"ъ",191:[",","."],187:["+","="],189:["_","-"],220:["/","\\"],48:[")","0"],49:["!","1"],50:['"',"2"],51:["№","3"],52:[";","4"],53:["%","5"],54:[":","6"],55:["?","7"],56:["*","8"],57:["(","9"],8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"CapsLock",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del"}},n={en:{shift:{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"CapsLock",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del",91:"Win",186:":",222:'"',188:"<",190:">",191:"?",192:"~",187:"+",189:"_",219:"{",221:"}",220:"|",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z"},unshift:{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"CapsLock",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del",91:"Win",186:";",222:"'",188:",",189:"-",190:".",191:"/",192:"`",187:"=",219:"[",221:"]",220:"\\",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"}},ru:{shift:{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"CapsLock",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del",91:"Win",186:"Ж",222:"Э",188:"Б",190:"Ю",191:",",192:"Ё",187:"+",189:"_",219:"Х",221:"Ъ",220:"|",48:")",49:"!",50:'"',51:"№",52:";",53:"%",54:":",55:"?",56:"*",57:"(",65:"Ф",66:"И",67:"С",68:"В",69:"У",70:"А",71:"П",72:"Р",73:"Ш",74:"О",75:"Л",76:"Д",77:"Ь",78:"Т",79:"Щ",80:"З",81:"Й",82:"Г",83:"Ы",84:"Е",85:"Г",86:"М",87:"Ц",88:"Ч",89:"Н",90:"Я"},unshift:{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",20:"CapsLock",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del",91:"Win",186:"ж",222:"э",188:"б",189:"-",190:"ю",191:".",192:"`",187:"=",219:"х",221:"ъ",220:"\\",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"ф",66:"и",67:"с",68:"в",69:"у",70:"а",71:"п",72:"р",73:"ш",74:"о",75:"л",76:"д",77:"ь",78:"т",79:"о",80:"з",81:"й",82:"г",83:"ы",84:"е",85:"г",86:"м",87:"ц",88:"ч",89:"н",90:"я"}}};var s=class{constructor(){this.genData=new a,this.specialKey=["Tab","CapsLock","Alt","","Ctrl","Backspace","Left","Down","Right","Shift","Up","Win","Enter","Space","Del"],this.keydownSpecKeys=[],this.handlingKeys=new class{constructor(){this.isShift=!1,this.specSymbols=["&emsp;","</br>"]}handlingCaps(t){return t.capsLock?t.capsLock=!1:t.capsLock=!0,t}handlingShift(t,e,n){if(!this.isShift)return console.log(1234432),"shift"===t.shift?(console.log(1,44),t.shift="unshift"):(console.log(2,44),t.shift="shift"),console.log(t),this.isShift=!0,console.log(this.isShift,"BEFORE"),t}handlingShiftUp(t,e,n){if(console.log(this.isShift),this.isShift)return"shift"===t.shift?t.shift="unshift":t.shift="shift",this.isShift=!1,t}handlingEnter(t,e,n){return t.content+="</br>",t}handlingBackspace(t){const e=t.content;if(e.length>=1){console.log(e[e.length-1]);for(const n of this.specSymbols){if(">"===e[e.length-1])return t.content=e.slice(0,e.lastIndexOf("<")),t;if(";"===e[e.length-1])return t.content=e.slice(0,e.lastIndexOf("&")),t}if(1==e.length)return t.content="",t;t.content=e.slice(0,e.length-1)}return t}handlingTab(t){return t.content+="&emsp;",t}handlingSpace(t,e,n){return t.content+="&nbsp;",t}handlingDel(t){}}}clickKeyHandler(t){const e=+t.dataset.keyCode;this.addKeyActiveStyle(t),this.changeContent(e)}keydownKeyHandler(t){t.preventDefault(),this.switchLang(t);const e=document.querySelector(`[data-key-code="${t.keyCode}"]`);this.addKeyActiveStyle(e),this.changeContent(t.keyCode)}keyupKeyHandler(t){t.preventDefault();const e=this.genData.getDataLs(),s=n[e.lang][e.shift][t.keyCode];document.querySelector(`[data-key-code="${t.keyCode}"]`);let a=null;"Shift"===s&&(a=this.handlingKeys.handlingShiftUp(e,s,t.keyCode),a&&(this.genData.setDataLs(a),this.genData.switchKeys()))}changeContent(t){const n=this.genData.getDataLs(),s="shift"===n.shift?0:1,a=Array.isArray(e[n.lang][t])?e[n.lang][t][s]:e[n.lang][t];if(console.log(a),!a)return;let i=null;if("Enter"===a&&(i=this.handlingKeys.handlingEnter(n,a,t),this.genData.setDataLs(i)),"Space"===a&&(i=this.handlingKeys.handlingSpace(n,a,t),this.genData.setDataLs(i)),"Shift"===a)return i=this.handlingKeys.handlingShift(n,a,t),void(i&&(console.log(i.content),this.genData.setDataLs(i),this.switchShiftKeys()));if("CapsLock"===a&&(i=this.handlingKeys.handlingCaps(n,a,t),i&&(this.genData.setDataLs(i),this.switchCapsKeys(),this.switchActiveCaps(t))),"Backspace"===a&&(i=this.handlingKeys.handlingBackspace(n,a,t),i))return this.genData.setDataLs(i),void this.genData.changeWindowContent();if("Tab"===a&&(i=this.handlingKeys.handlingTab(n,a,t),i))return this.genData.setDataLs(i),void this.genData.changeWindowContent();if(!this.specialKey.includes(a)&&n){const t="shift"===this.genData.getDataLs().shift,e=this.genData.getDataLs().capsLock;return t&&e?(console.log(1),n.content+=a,this.genData.setDataLs(n),void this.genData.changeWindowContent()):t||e?(console.log(3),n.content+=a.toUpperCase(),this.genData.setDataLs(n),void this.genData.changeWindowContent()):(console.log(2),n.content+=a,this.genData.setDataLs(n),void this.genData.changeWindowContent())}this.genData.changeWindowContent()}switchActiveCaps(t){const e=document.querySelector(`[data-key-code="${t}"]`);console.log(t),e&&e.classList.toggle("keyboard__key_on")}switchCapsKeys(){const t=document.querySelectorAll(".keyboard__key"),n=this.genData.getDataLs(),s="shift"===n.shift?0:1;for(const a of t){const t=e[n.lang][a.dataset.keyCode];Array.isArray(t)?a.textContent=t[s]:n.capsLock?1==t.length&&(a.textContent=t.toUpperCase()):1==t.length&&(a.textContent=t.toLowerCase())}}switchShiftKeys(){const t=document.querySelectorAll(".keyboard__key"),n=this.genData.getDataLs(),s="shift"===n.shift?0:1;for(const a of t){const t=e[n.lang][a.dataset.keyCode];Array.isArray(t)?a.textContent=t[s]:"shift"===n.shift?1==t.length?a.textContent=t.toUpperCase():"space"===t.toLowerCase()?a.textContent="":a.textContent=t:1==t.length?a.textContent=t.toLowerCase():a.textContent=t}}switchLang(t){const e=this.genData.getDataLs(),s=n[e.lang][e.shift][t.keyCode];"Shift"===s&&this.keydownSpecKeys.push(s),"Ctrl"===s&&this.keydownSpecKeys.push(s),this.keydownSpecKeys.length>2&&this.keydownSpecKeys.splice(0,2),("Shift"===this.keydownSpecKeys[this.keydownSpecKeys.length-1]&&"Ctrl"===this.keydownSpecKeys[this.keydownSpecKeys.length-2]||"Shift"===this.keydownSpecKeys[this.keydownSpecKeys.length-2]&&"Ctrl"===this.keydownSpecKeys[this.keydownSpecKeys.length-1])&&("en"===e.lang?(e.lang="ru",this.genData.setDataLs(e),this.genData.switchKeys()):(e.lang="en",this.genData.setDataLs(e),this.genData.switchKeys()),this.keydownSpecKeys=[])}addKeyActiveStyle(t){t&&(t.classList.add("keyboard__key_active"),setTimeout((()=>{t.classList.remove("keyboard__key_active")}),200))}windowClickHandler(t){const e=t.target.closest(".keyboard__key");e&&this.clickKeyHandler(e)}},a=class{constructor(){this.settings={lang:"en",capsLock:!1,shift:"unshift",content:"Input text"}}init(){window.addEventListener("load",(()=>{this.loadDom()})),window.addEventListener("click",(t=>{t.preventDefault(),(new s).windowClickHandler(t)}))}createKeyboard(){this.getDataLs()||this.setDataLs();const e=document.createElement("div"),n=document.createElement("div");e.classList.add("keyboard"),n.classList.add("keyboard__inner");const s=this.getDataLs();console.log(t);for(const e in t[s.lang][s.shift]){const a=document.createElement("div");a.classList.add("keyboard__row");for(const n of t[s.lang][s.shift][e]){const t=document.createElement("div");t.classList.add("keyboard__key"),"space"===n[1].toLowerCase()?(t.classList.add("keyboard__key-space"),t.textContent=""):t.textContent=n[1],this.getDataLs().capsLock&&"capslock"===n[1].toLowerCase()&&t.classList.add("keyboard__key_on"),t.dataset.keyCode=n[0],a.appendChild(t)}n.appendChild(a)}return e.appendChild(n),e}switchKeys(){const t=document.querySelectorAll(".keyboard__key"),n=this.getDataLs();console.log(n,666);const s="shift"===n.shift?0:1;for(const a of t){const t=e[n.lang][a.dataset.keyCode];Array.isArray(t)?a.textContent=t[s]:"space"===t.toLowerCase()?(console.log(1111,"SPACE"),a.textContent=""):a.textContent=t}}createContentBlock(){const t=document.createElement("div"),e=document.createElement("div");return t.classList.add("content-box"),e.classList.add("content-box__inner"),t.appendChild(e),e.innerHTML=this.getDataLs().content,t}setDataLs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.settings;localStorage.setItem("settings",JSON.stringify(t))}getDataLs(){return localStorage.getItem("settings")||new Error("Data are empty"),JSON.parse(localStorage.getItem("settings"))}loadDom(){if(document.body.appendChild(this.createKeyboard()),this.showContent(),document.querySelector(".content-box__inner")){const t=new s;window.addEventListener("keydown",(e=>{t.keydownKeyHandler(e)})),window.addEventListener("keyup",(e=>{t.keyupKeyHandler(e)}))}this.createHelpText()}showContent(){document.body.prepend(this.createContentBlock())}createHelpText(){const t=document.createElement("div"),e=document.createElement("p"),n=document.createElement("p");t.classList.add("help-text"),e.classList.add("help-text__one"),n.classList.add("help-text__two"),e.textContent="Клавиатура создана в операционной системе Windows",n.textContent="Для переключения языка комбинация: ctrl + shift",t.appendChild(e),t.appendChild(n),document.body.appendChild(t)}changeWindowContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDataLs();const e=document.querySelector(".content-box__inner");e&&(e.innerHTML=t.content)}};(new a).init()}();