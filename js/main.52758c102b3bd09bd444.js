!function(){"use strict";let t={en:{shift:{one:[[192,"~"],[49,"!"],[50,"@"],[51,"#"],[52,"$"],[53,"%"],[54,"^"],[55,"&"],[56,"*"],[57,"("],[48,")"],[189,"_"],[187,"+"],[8,"Backspace"]],two:[[9,"Tab"],[81,"Q"],[87,"W"],[69,"E"],[82,"R"],[84,"T"],[89,"Y"],[85,"U"],[73,"I"],[70,"O"],[80,"P"],[219,"["],[221,"]"],[220,"|"]],three:[[20,"CapsLock"],[65,"A"],[83,"S"],[68,"D"],[70,"F"],[71,"G"],[72,"H"],[74,"J"],[75,"K"],[76,"L"],[186,":"],[222,'"'],[13,"Enter"]],four:[[16,"Shift"],[90,"Z"],[88,"X"],[67,"C"],[86,"V"],[66,"B"],[78,"N"],[77,"M"],[188,"<"],[190,">"],[191,"?"],[16,"Shift"],[38,"Up"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]},unshift:{one:[[192,"`"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[48,"0"],[189,"-"],[187,"="],[8,"Backspace"]],two:[[9,"Tab"],[81,"q"],[87,"w"],[69,"e"],[82,"r"],[84,"t"],[89,"y"],[85,"u"],[73,"i"],[79,"o"],[80,"p"],[219,"["],[221,"]"],[220,String("/")]],three:[[20,"CapsLock"],[65,"a"],[83,"s"],[68,"d"],[70,"f"],[71,"g"],[72,"h"],[74,"j"],[75,"k"],[76,"l"],[186,":"],[222,'"'],[13,"Enter"]],four:[[16,"Shift"],[90,"z"],[88,"x"],[67,"c"],[86,"v"],[66,"b"],[78,"n"],[77,"m"],[188,","],[190,"."],[191,"/"],[16,"Shift"],[38,"Up"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]}},ru:{shift:{one:[[192,"Ё"],[49,"!"],[50,'"'],[51,"№"],[52,";"],[53,"%"],[54,":"],[55,"?"],[56,"*"],[57,"("],[48,")"],[189,"_"],[187,"+"],[8,"Backspace"]],two:[[9,"Tab"],[81,"Й"],[87,"Ц"],[69,"У"],[82,"К"],[84,"Е"],[89,"Н"],[85,"Г"],[73,"Ш"],[79,"Щ"],[80,"З"],[219,"Х"],[221,"Ъ"],[220,"/"]],three:[[20,"CapsLock"],[65,"Ф"],[83,"Ы"],[68,"В"],[70,"А"],[71,"П"],[72,"Р"],[74,"О"],[75,"Л"],[76,"Д"],[186,"Ж"],[222,"Э"],[13,"Enter"]],four:[[16,"Shift"],[90,"Я"],[88,"Ч"],[67,"С"],[86,"М"],[66,"И"],[78,"Т"],[77,"Ь"],[188,"Б"],[190,"Ю"],[191,","],[16,"Shift"],[38,"Up"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]},unshift:{one:[[192,"ё"],[49,"1"],[50,"2"],[51,"3"],[52,"4"],[53,"5"],[54,"6"],[55,"7"],[56,"8"],[57,"9"],[48,"0"],[189,"-"],[187,"="],[8,"Backspace"]],two:[[9,"Tab"],[81,"й"],[87,"ц"],[69,"у"],[82,"к"],[84,"е"],[89,"н"],[85,"г"],[73,"ш"],[79,"щ"],[80,"з"],[219,"х"],[221,"ъ"],[220,"\\"]],three:[[20,"CapsLock"],[65,"ф"],[83,"ы"],[68,"в"],[70,"а"],[71,"п"],[72,"р"],[74,"о"],[75,"л"],[76,"д"],[186,"ж"],[222,"э"],[13,"Enter"]],four:[[16,"Shift"],[90,"я"],[88,"ч"],[67,"с"],[86,"м"],[66,"и"],[78,"т"],[77,"ь"],[188,"б"],[190,"ю"],[191,"."],[16,"Shift"],[38,"Up"]],five:[[17,"Ctrl"],[91,"Win"],[18,"Alt"],[32,"space"],[18,"Alt"],[17,"Ctrl"],[37,"Left"],[40,"Down"],[39,"Right"]]}}},e={en:{65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"Win",186:[":",";"],222:['"',"'"],188:["<",","],190:[">","-"],191:["/","."],192:["~","/"],187:["+","`"],189:["_","="],219:["{","["],221:["}","]"],220:["|","\\"],48:[")","0"],49:["!","1"],50:["@","2"],51:["#","3"],52:["$","4"],53:["%","5"],54:["^","6"],55:["&","7"],56:["*","8"],57:["(","9"],8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps lock",32:"space",37:"arrow left",38:"arrow up",39:"arrow right",40:"arrow down",46:"delete"},ru:{65:"ф",66:"и",67:"с",68:"в",69:"у",70:"а",71:"п",72:"р",73:"ш",74:"о",75:"л",76:"д",77:"ь",78:"т",79:"о",80:"з",81:"й",82:"г",83:"ы",84:"е",85:"г",86:"м",87:"ц",88:"ч",89:"н",90:"я",91:"Win",186:"ж",222:"э",188:"б",190:"ю",192:"ё",219:"х",221:"ъ",191:[",","."],187:["+","="],189:["_","-"],220:["/","\\"],48:[")","0"],49:["!","1"],50:['"',"2"],51:["№","3"],52:[";","4"],53:["%","5"],54:[":","6"],55:["?","7"],56:["*","8"],57:["(","9"],8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps lock",32:"space",37:"arrow left",38:"arrow up",39:"arrow right",40:"arrow down",46:"delete"}},s={en:{shift:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps lock",32:"space",37:"arrow left",38:"arrow up",39:"arrow right",40:"arrow down",46:"delete",186:":",222:'"',188:"<",190:">",191:"/",192:"~",187:"+",189:"_",219:"{",221:"}",220:"|",48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z"},unshift:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps lock",32:"space",37:"arrow left",38:"arrow up",39:"arrow right",40:"arrow down",46:"delete",186:";",222:"'",188:",",189:"-",190:".",191:"/",192:"`",187:"=",219:"[",221:"]",220:"\\",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"}},ru:{shift:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps lock",32:"space",37:"arrow left",38:"arrow up",39:"arrow right",40:"arrow down",46:"delete",186:"Ж",222:"Э",188:"Б",190:"Ю",191:",",192:"Ё",187:"+",189:"_",219:"Х",221:"Ъ",220:"/",48:")",49:"!",50:'"',51:"№",52:";",53:"%",54:":",55:"?",56:"*",57:"(",65:"Ф",66:"И",67:"С",68:"В",69:"У",70:"А",71:"П",72:"Р",73:"Ш",74:"О",75:"Л",76:"Д",77:"Ь",78:"Т",79:"Щ",80:"З",81:"Й",82:"Г",83:"Ы",84:"Е",85:"Г",86:"М",87:"Ц",88:"Ч",89:"Н",90:"Я"},unshift:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps lock",32:"space",37:"arrow left",38:"arrow up",39:"arrow right",40:"arrow down",46:"delete",186:"ж",222:"э",188:"б",189:"-",190:"ю",191:".",192:"`",187:"=",219:"х",221:"ъ",220:"\\",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"ф",66:"и",67:"с",68:"в",69:"у",70:"а",71:"п",72:"р",73:"ш",74:"о",75:"л",76:"д",77:"ь",78:"т",79:"о",80:"з",81:"й",82:"г",83:"ы",84:"е",85:"г",86:"м",87:"ц",88:"ч",89:"н",90:"я"}}};var n=class{constructor(){this.genData=new a,this.specialKey=["tab","capslock","alt","","ctrl","backspace","left","down","right","shift","up","win","enter","space"],this.keydownSpecKeys=[],this.handlingKeys=new class{constructor(){this.isShift=!1}handlingCaps(t){return t.capsLock?t.capsLock=!1:t.capsLock=!0,t}handlingShift(t,e,s){if(!this.isShift)return console.log(1234432),"shift"===t.shift?(console.log(1,44),t.shift="unshift"):(console.log(2,44),t.shift="shift"),console.log(t),this.isShift=!0,console.log(this.isShift,"BEFORE"),t}handlingShiftUp(t,e,s){if(console.log(this.isShift),this.isShift)return"shift"===t.shift?t.shift="unshift":t.shift="shift",this.isShift=!1,t}handlingEnter(t,e,s){return t.content+="\n",t}handlingBackspace(){}handlingSpace(t,e,s){return t.content+=" ",t}}}clickKeyHandler(t){let e=+t.dataset.keyCode;this.addKeyActiveStyle(t),this.changeContent(e)}keydownKeyHandler(t){this.switchLang(t);let e=document.querySelector(`[data-key-code="${t.keyCode}"]`);this.addKeyActiveStyle(e),this.changeContent(t.keyCode)}keyupKeyHandler(t){let e=this.genData.getDataLs(),n=s[e.lang][e.shift][t.keyCode],a=(document.querySelector(`[data-key-code="${t.keyCode}"]`),null);"shift"===n&&(console.log("-------keyUp-------"),a=this.handlingKeys.handlingShiftUp(e,n,t.keyCode),console.log(a,"data"),a&&(console.log(77),this.genData.setDataLs(a),this.genData.switchKeys()),console.log("END-------keyUp-------"))}changeContent(t){let e=this.genData.getDataLs(),n=s[e.lang][e.shift][t],a=null;if("enter"===n&&(a=this.handlingKeys.handlingEnter(e,n,t),this.genData.setDataLs(a)),"space"===n&&(a=this.handlingKeys.handlingSpace(e,n,t),this.genData.setDataLs(a)),"shift"===n)return a=this.handlingKeys.handlingShift(e,n,t),void(a&&(this.genData.setDataLs(a),this.switchShiftKeys()));"caps lock"===n&&(a=this.handlingKeys.handlingCaps(e,n,t),a&&(this.genData.setDataLs(a),this.switchCapsKeys())),!this.specialKey.includes(n)&&e&&(e.content+=n,this.genData.setDataLs(e)),this.genData.changeWindowContent()}switchCapsKeys(){let t=document.querySelectorAll(".keyboard__key"),s=this.genData.getDataLs(),n="shift"===s.shift?0:1;for(let a of t){let t=e[s.lang][a.dataset.keyCode];console.log(t,a.dataset.keyCode),Array.isArray(t)?a.textContent=t[n]:s.capsLock?1==t.length&&(a.textContent=t.toUpperCase()):1==t.length&&(a.textContent=t.toLowerCase())}}switchShiftKeys(){let t=document.querySelectorAll(".keyboard__key"),s=this.genData.getDataLs();console.log(s,666);let n="shift"===s.shift?0:1;for(let a of t){let t=e[s.lang][a.dataset.keyCode];Array.isArray(t)?a.textContent=t[n]:"shift"===s.shift?1==t.length?a.textContent=t.toUpperCase():a.textContent=t:1==t.length?a.textContent=t.toLowerCase():a.textContent=t}}switchLang(t){let e=this.genData.getDataLs(),n=s[e.lang][e.shift][t.keyCode];"shift"===n&&this.keydownSpecKeys.push(n),"ctrl"===n&&this.keydownSpecKeys.push(n),this.keydownSpecKeys.length>2&&this.keydownSpecKeys.splice(0,2),("shift"===this.keydownSpecKeys[this.keydownSpecKeys.length-1]&&"ctrl"===this.keydownSpecKeys[this.keydownSpecKeys.length-2]||"shift"===this.keydownSpecKeys[this.keydownSpecKeys.length-2]&&"ctrl"===this.keydownSpecKeys[this.keydownSpecKeys.length-1])&&(console.log(7656789),"en"===e.lang?(console.log(1),e.lang="ru",this.genData.setDataLs(e),this.genData.switchKeys()):(console.log(2),e.lang="en",this.genData.setDataLs(e),this.genData.switchKeys()),this.keydownSpecKeys=[])}addKeyActiveStyle(t){t.classList.add("keyboard__key_active"),setTimeout((()=>{t.classList.remove("keyboard__key_active")}),200)}windowClickHandler(t){let e=t.target.closest(".keyboard__key");e&&this.clickKeyHandler(e)}},a=class{constructor(){this.settings={lang:"en",capsLock:!1,shift:"unshift",content:"Input text"}}init(){window.addEventListener("load",(()=>{this.loadDom()})),window.addEventListener("click",(t=>{(new n).windowClickHandler(t)}))}createKeyboard(){this.getDataLs()||this.setDataLs();let e=document.createElement("div"),s=document.createElement("div");e.classList.add("keyboard"),s.classList.add("keyboard__inner");let n=this.getDataLs();console.log(t);for(let e in t[n.lang][n.shift]){let a=document.createElement("div");a.classList.add("keyboard__row");for(let s of t[n.lang][n.shift][e]){let t=document.createElement("div");t.classList.add("keyboard__key"),t.textContent=s[1],t.dataset.keyCode=s[0],a.appendChild(t)}s.appendChild(a)}return e.appendChild(s),e}switchKeys(){let t=document.querySelectorAll(".keyboard__key"),s=this.getDataLs();console.log(s,666);let n="shift"===s.shift?0:1;for(let a of t){let t=e[s.lang][a.dataset.keyCode];Array.isArray(t)?a.textContent=t[n]:a.textContent=t}}createContentBlock(){let t=document.createElement("div"),e=document.createElement("div");return t.classList.add("content-box"),e.classList.add("content-box__inner"),t.appendChild(e),e.textContent=this.getDataLs().content,t}setDataLs(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.settings;localStorage.setItem("settings",JSON.stringify(t))}getDataLs(){return localStorage.getItem("settings")||new Error("Data are empty"),JSON.parse(localStorage.getItem("settings"))}loadDom(){if(document.body.appendChild(this.createKeyboard()),this.showContent(),document.querySelector(".content-box__inner")){let t=new n;window.addEventListener("keydown",(e=>{t.keydownKeyHandler(e)})),window.addEventListener("keyup",(e=>{t.keyupKeyHandler(e)}))}}showContent(){document.body.prepend(this.createContentBlock())}changeWindowContent(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getDataLs(),e=document.querySelector(".content-box__inner");e&&(e.textContent=t.content)}};(new a).init()}();